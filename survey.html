<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="google" value="notranslate">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="website">
  <meta name="description" content="IslandJS: NodeSchool and Open Projects on Bainbridge Island, Washington.">
  <meta name="url" content="https://islandjs.github.io/islandjs.org/">
  <meta name="rating" content="General">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>IslandJS - NodeSchool and Open Projects on Bainbridge Island, Washington</title>
  <base href="https://islandjs.github.io/islandjs.org/survey.html">
  <link href="css/materialize.min.css"  media="screen,projection" type="text/css" rel="stylesheet" >
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <link href="css/islandjs.css" type="text/css" rel="stylesheet">
</head>
<body>
  <div class="section no-pad-bot" id="index-banner">
    <div class="container">
      <div class="row">
        <div class="col s12 m6">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title">Survey</span>
              <p>Please tell us about yourself so we can best plan for space,
                 location, and timing.</p>
            </div>
          </div>
        </div>
      </div>
      <form name="NodeSchool" enctype="application/json" action="#" method="POST">
        <div class="row">
          <div class="input-field col s11">
            <i class="material-icons prefix">account_circle</i>
            <input id="firstName" type="text" class="validate">
            <label for="firstName">First Name</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s11">
            <i class="material-icons prefix">email</i>
            <input id="email" type="email" class="validate">
            <label for="email">Email</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <i class="material-icons prefix">laptop</i>
            <label for="volunteering">Interested in volunteering?</label>
          </div>
          <div class="input-field col s6">
            <input name="volunteering" id="volunteering_yes" type="radio" />
            <label for="volunteering_yes">Yes</label>
              &nbsp;
            <input name="volunteering" id="volunteering_no" type="radio" />
            <label for="volunteering_no">No</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <i class="material-icons prefix">laptop</i>
            <label for="interests">What interests you in NodeSchool?</label>
          </div>
          <div class="input-field col s6">
            <textarea id="interests" rows="15" cols="12"></textarea>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <i class="material-icons prefix">laptop</i>
            <label for="program">Have you programmed before?</label>
          </div>
          <div class="input-field col s6">
            <input name="program" type="radio" id="program_yes" />
            <label for="program_yes">Yes</label>
              &nbsp;
              <input name="program" type="radio" id="program_no" />
              <label for="program_no">No</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <i class="material-icons prefix">location_city</i>
            <label for="experience">For how many years?</label>
          </div>
        <div class="input-field col s2">
          <input name="experience" type="text" id="years" val="0"/>
        </div>
        <div class="input-field col s4">
          <input type="range" id="ranger" min="0" max="10" />
        </div>
        <div class="row">
          <div class="input-field col s6">
            <i class="material-icons prefix">laptop</i>
            <label for="experience">In what languages?</label>
          </div>
          <div class="input-field col s6" id ="languages"></div>
        </div>
        <div class="row">
          <div class="col s12">
          <button class="blue-grey darken1 waves-effect waves-light btn"
                  type="submit" name="action">
                  Submit<i class="material-icons right">send</i></button>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div id="error-alert" class="modal hidden">
    <div class="modal-content">
      <h4>Error</h4>
      <p id="text"></p>
    </div>
    <div class="modal-footer">
      <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Ok</a>
    </div>
  </div>
  <!-- Modal Structure -->
  <div id="error-modal" class="modal">
    <div class="modal-content">
      <h4>Error!</h4>
      <p>There has been an unknown error while communicating with the server!</p>
    </div>
    <div class="modal-footer">
      <a id="close-button" href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
    </div>
  </div>
</div>
<script type="text/javascript" src="js/jquery-2.2.4.min.js"></script>
<script type="text/javascript" src="js/jquery.cookie.js"></script>
<script type="text/javascript" src="js/materialize.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
<script>
  var langs = ['blockly', 'html', 'javascript', 'cpp', 'c', 'lisp', 'haskell',
  'perl', 'ruby', 'python'];

  /* Generate language checkboxes */
  langs.forEach(function (lang) {
    $('#languages')
      .append('<p>\n')
      .append("\t<input name='" + lang + "' type='checkbox' id='" + lang + "'/>")
      .append("<label for ='" + lang + "'>" + lang + '</label>\n')
      .append('</p>');
  });

  $('#ranger').on('input', function () {
    $('#years').val($('#ranger').val());
  });

  $('#years').on('input', function () {
    $('#ranger').val($('#years').val());
  });

  $('form').submit(function (event) {
    event.preventDefault();
    var results = {
      Survey: 'NodeSchool',
      Name: $('#firstName').val(),
      Email: $('#email').val(),
      Volunteering: $('#volunteering_yes').is(':checked') ? true : false,
      Interests: $('#interests').val(),
      Program: $('#program_yes').is(':checked') ? true : false,
      Years: new Number($('#years').val()),
      Languages: langs.filter(function (lang) {
        return eval("$('#" + lang + "').is(':checked')"); }),
    };

    $.ajax({
      url: 'http://islandjs.org:3000/survey/spring',
      type: 'POST',
      crossDomain: true,
      data: JSON.stringify(results),
      dataType: 'json',
      success: function (response) {
        if (localStorage) {
          localStorage.setItem('survey', 'completed');
        } else {
          $.cookie('survey', 'completed');
        }

        window.history.back().reload();
      },

      error: function (xhr, status) {
        $('#error-modal').openModal();
      },
    });
  });

  $('#close-button').on('click', function () {
    window.history.back();
  });

</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62119242-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>
